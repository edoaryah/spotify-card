<svg width="297" height="396" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-labelledby="cardTitle" role="img">
  <title id="cardTitle">Now playing on Spotify</title>
  <foreignObject width="297" height="396">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      div {
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial,
          sans-serif, Apple Color Emoji, Segoe UI Emoji;
      }

      .container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 15px;
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, {{ color1 }}, {{ color2 }}, {{ color3 }}, {{ color4 }});
        animation: gradientAnimation 10s ease infinite;
        background-size: 200% 200%;
        border: 2px solid #1ed760;
        border-radius: 12px;
        gap: 5px;
      }

      .playing {
        display: flex;
        flex-direction: row;
        gap: 10px;
        align-items: center;
        color: #1ed760;
        font-weight: bold;
      }

      .song {
        font-size: 20px;
        font-weight: bold;
        color: #fff;
      }

      .title {
        margin: 0 auto;
        white-space: nowrap;
        overflow: hidden;
        width: 200px;
        font-size: 20px;
        font-weight: bold;
        color: #fff;
      }

      .title span {
        display: inline-block;
        padding-left: 100%;
        animation: marquee 10s linear infinite;
      }

      .title-animation span {
        animation-delay: 0s;
      }

      @keyframes marquee {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(-100%, 0);
        }
      }

      .artist {
        color: #b3b3b3;
        padding-bottom: 5px;
      }

      .artist {
        margin: 0 auto;
        white-space: nowrap;
        overflow: hidden;
        width: 200px;
        color: #b3b3b3;
        padding-bottom: 5px;
      }

      .artist span {
        display: inline-block;
        padding-left: 100%;
        animation: marquee 10s linear infinite;
      }

      .artist-animation span {
        animation-delay: 0s;
      }

      .art {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .centered {
        position: absolute;
        text-align: center;
        color: #fff;
      }

      img {
        border: 2px solid #1ed760;
        border-radius: 50%;
        animation: spin 20s linear infinite;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes gradientAnimation {
	0% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
	100% {
		background-position: 0% 50%;
	}
}
    </style>

    <div xmlns="http://www.w3.org/1999/xhtml" class="container">
      <div class="playing">
        <p>{{ title_text }} on</p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 236.05 225.25" width="30" height="30">
          <style>
            .cls-1 {
              fill: #1ed760;
              stroke-width: 0px;
            }
          </style>
          <path class="cls-1"
            d="m122.37,3.31C61.99.91,11.1,47.91,8.71,108.29c-2.4,60.38,44.61,111.26,104.98,113.66,60.38,2.4,111.26-44.6,113.66-104.98C229.74,56.59,182.74,5.7,122.37,3.31Zm46.18,160.28c-1.36,2.4-4.01,3.6-6.59,3.24-.79-.11-1.58-.37-2.32-.79-14.46-8.23-30.22-13.59-46.84-15.93-16.62-2.34-33.25-1.53-49.42,2.4-3.51.85-7.04-1.3-7.89-4.81-.85-3.51,1.3-7.04,4.81-7.89,17.78-4.32,36.06-5.21,54.32-2.64,18.26,2.57,35.58,8.46,51.49,17.51,3.13,1.79,4.23,5.77,2.45,8.91Zm14.38-28.72c-2.23,4.12-7.39,5.66-11.51,3.43-16.92-9.15-35.24-15.16-54.45-17.86-19.21-2.7-38.47-1.97-57.26,2.16-1.02.22-2.03.26-3.01.12-3.41-.48-6.33-3.02-7.11-6.59-1.01-4.58,1.89-9.11,6.47-10.12,20.77-4.57,42.06-5.38,63.28-2.4,21.21,2.98,41.46,9.62,60.16,19.74,4.13,2.23,5.66,7.38,3.43,11.51Zm15.94-32.38c-2.1,4.04-6.47,6.13-10.73,5.53-1.15-.16-2.28-.52-3.37-1.08-19.7-10.25-40.92-17.02-63.07-20.13-22.15-3.11-44.42-2.45-66.18,1.97-5.66,1.15-11.17-2.51-12.32-8.16-1.15-5.66,2.51-11.17,8.16-12.32,24.1-4.89,48.74-5.62,73.25-2.18,24.51,3.44,47.99,10.94,69.81,22.29,5.12,2.66,7.11,8.97,4.45,14.09Z" />
        </svg>
      </div>
      {% if viewAnimation %}
      <div class="song-title-long">
        <p class="title title-animation">
          <span>{{ song_name }}</span>
        </p>
      </div>
      {% else %}
      <div class="song">
        <span>{{ song_name }}</span>
      </div>
      {% endif %}

      {% if viewAnimation2 %}
      <div class="artist-name-long">
        <p class="artist artist-animation">
          <span>{{ artist_name}}</span>
        </p>
      </div>
      {% else %}
      <div class="artist">
        <span>{{ artist_name }}</span>
      </div>
      {% endif %}

      <div class="art">
        <img id="artwork" src="{{ img }}" width="250" />
        <div class="centered">
          <svg width="35" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M100 50C100 77.6142 77.6142 100 50 100C22.3858 100 0 77.6142 0 50C0 22.3858 22.3858 0 50 0C77.6142 0 100 22.3858 100 50ZM10 50C10 72.0914 27.9086 90 50 90C72.0914 90 90 72.0914 90 50C90 27.9086 72.0914 10 50 10C27.9086 10 10 27.9086 10 50Z"
              fill="white" />
            <circle cx="50" cy="50" r="25" fill="white" />
          </svg>
        </div>
      </div>
    </div>
  </foreignObject>
</svg>